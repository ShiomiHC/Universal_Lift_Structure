<?xml version="1.0" encoding="utf-8"?>

<Defs>
    <!-- 文件意图：控制器建筑的 Def 定义。 -->
    <ThingDef ParentName="BuildingBase" Name="ULS_WallControllerBase" Abstract="True">
        <!-- 逻辑类 -->
        <thingClass>Universal_Lift_Structure.Building_WallController</thingClass>
        <!-- 必须实时准备升降动画 -->
        <tickerType>Normal</tickerType>
        <!-- 需求地形 -->
        <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
        <!-- 绘制：电缆层 -->
        <altitudeLayer>Conduits</altitudeLayer>
        <!-- 不可旋转 -->
        <rotatable>false</rotatable>
        <!-- 贴图 -->
        <graphicData>
            <graphicClass>Graphic_Single</graphicClass>
            <!-- 连接 -->
            <linkType>Basic</linkType>
            <drawSize>(1,1)</drawSize>
        </graphicData>
        <useSameGraphicForGhost>false</useSameGraphicForGhost>
        <!-- 建筑节点设置 -->
        <building>
            <blueprintGraphicData>
                <texPath>Things/Building/Linked/ULS_WallController_BP_Atlas</texPath>
                <graphicClass>Graphic_Single</graphicClass>
            </blueprintGraphicData>
            <!-- 非主体结构 -->
            <isEdifice>false</isEdifice>
            <!-- 允许覆盖结构放置 -->
            <canPlaceOverWall>true</canPlaceOverWall>
            <!-- 允许作为结构上的叠放对象 -->
            <isPlaceOverableWall>true</isPlaceOverableWall>
        </building>

        <!-- 名称-->
        <label />
        <!-- 描述-->
        <description />
        <!-- UI 图标 -->
        <uiIconPath>Things/Building/Linked/ULS_WallController_Icon</uiIconPath>
        <!-- 尺寸 -->
        <size>(1,1)</size>

        <!--研发前置：电力-->
        <researchPrerequisites>
            <li>Electricity</li>
        </researchPrerequisites>

        <!-- 工作量/耐久/燃烧/价值 -->
        <statBases>
            <WorkToBuild>400</WorkToBuild>
            <MaxHitPoints>200</MaxHitPoints>
            <Flammability>0.1</Flammability>
            <MarketValue>50</MarketValue>
        </statBases>

        <!-- 建筑菜单类别：结构 -->
        <designationCategory>Structure</designationCategory>
        <!-- 填充样式：2D -->
        <drawStyleCategory>Default2D</drawStyleCategory>

        <!-- 放置规则 -->
        <placeWorkers>
            <li>Universal_Lift_Structure.ULS_PlaceRule_WallController</li>
        </placeWorkers>
        <!-- 绘制方式：静态地图-->
        <drawerType>MapMeshOnly</drawerType>
    </ThingDef>

    <!-- 控制器 -->
    <ThingDef ParentName="ULS_WallControllerBase">
        <defName>ULS_WallController</defName>
        <!-- 贴图 -->
        <graphicData>
            <texPath>Things/Building/Linked/ULS_WallController_Atlas</texPath>
            <!-- 连接标志-->
            <linkFlags>
                <li>Custom4</li>
            </linkFlags>
        </graphicData>
        <!-- UI 图标 -->
        <uiIconPath>Things/Building/Linked/ULS_WallController_Icon</uiIconPath>
        <comps>
            <!-- 电力：待机 1W -->
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>1</basePowerConsumption>
            </li>
            <!-- 电源开关：允许玩家指派开关电源 -->
            <li Class="CompProperties_Flickable" />
        </comps>
        <!-- 造价 -->
        <costList>
            <Steel>30</Steel>
            <ComponentIndustrial>1</ComponentIndustrial>
        </costList>
    </ThingDef>

    <!-- 自动控制器-->
    <ThingDef ParentName="ULS_WallControllerBase">
        <defName>ULS_WallController_Auto</defName>
        <graphicData>
            <texPath>Things/Building/Linked/ULS_WallController_Auto_Atlas</texPath>
            <linkFlags>
                <li>Custom8</li>
            </linkFlags>
        </graphicData>
        <uiIconPath>Things/Building/Linked/ULS_WallController_Auto_Icon</uiIconPath>
        <comps>
            <li Class="CompProperties_Power">
                <compClass>CompPowerTrader</compClass>
                <basePowerConsumption>5</basePowerConsumption>
            </li>
            <li Class="CompProperties_Flickable" />

            <!-- 自动组标记-->
            <li Class="Universal_Lift_Structure.CompProperties_ULS_AutoGroupMarker">
                <!-- 默认过滤器：友方 -->
                <autoGroupType>Friendly</autoGroupType>
                <!-- 扫描半径 -->
                <maxRadius>2</maxRadius>
                <!-- 扫描间隔 -->
                <checkIntervalTicks>60</checkIntervalTicks>
                <!-- 升起延迟 -->
                <closeDelayTicks>30</closeDelayTicks>
                <!-- 开闭冷却 -->
                <toggleCooldownTicks>180</toggleCooldownTicks>
            </li>
        </comps>
        <costList>
            <Steel>30</Steel>
            <ComponentIndustrial>5</ComponentIndustrial>
        </costList>
    </ThingDef>
</Defs>