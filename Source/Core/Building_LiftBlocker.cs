namespace Universal_Lift_Structure;

// ============================================================
// 【升降阻挡器建筑类】
// ============================================================
// 此类表示升降过程中临时生成的阻挡实体
//
// 【继承关系】
// - 继承自 Building：作为地图上的实体建筑存在
//
// 【核心职责】
// 1. 在升降过程中占据控制器的单元格位置
// 2. 防止其他建筑或物品占用正在升降的空间
// 3. 在升降完成时自动销毁
//
// 【生命周期】
// - 创建：由 Building_WallController 在升降过程开始时创建
// - 存在：升降过程中持续存在，阻止其他实体占用该位置
// - 销毁：升降过程完成或中断时由控制器主动销毁
//
// 【重要机制】
// - 阻挡器是临时实体，不应被玩家直接操作
// - 仅作为占位符，不包含复杂逻辑
// - 销毁时执行父类的标准销毁流程
//
// 【设计目的】
// - 确保升降过程的原子性：防止过程中空间被占用
// - 避免异常状态：如果阻挡器被意外销毁，控制器会检测并处理
// ============================================================
public class Building_LiftBlocker : Building
{
    // ============================================================
    // 【重写销毁方法】
    // ============================================================
    // 执行标准的销毁流程，确保阻挡器被正确清理
    //
    // 【参数说明】
    // - mode: 销毁模式（默认为 Vanish，即直接消失）
    //
    // 【实现细节】
    // 1. 检查是否已被销毁，避免重复销毁
    // 2. 调用父类的 Destroy 方法执行标准清理流程
    //
    // 【调用时机】
    // - 升降过程完成时由控制器调用
    // - 升降过程中断时由控制器调用
    // - 玩家使用调试工具强制删除时触发
    //
    // 【注意事项】
    // - 不执行额外的清理逻辑，仅依赖父类的标准流程
    // - 控制器会独立追踪阻挡器的状态，不依赖此方法的回调
    // ============================================================
    public override void Destroy(DestroyMode mode = DestroyMode.Vanish)
    {
        // 检查是否已被销毁，避免重复执行
        if (this.Destroyed)
        {
            return;
        }

        // 调用父类的销毁方法，执行标准清理流程
        base.Destroy(mode);
    }
}
